# Система проверки работ на плагиат (AntiPlagiat)

## Архитектура
Система состоит из 3 микросервисов:
1. **API Gateway** (`:8000`) - единая точка входа, веб-интерфейс
2. **File Storing Service** (`:8001`) - хранение файлов и метаданных
3. **File Analysis Service** (`:8002`) - проверка на плагиат, генерация отчётов

## Как это работает
1. **Студент** загружает работу через веб-интерфейс (форма на сайте)
2. **API Gateway** принимает файл и отправляет его в File Storing Service
3. **File Storing Service** сохраняет файл на сервере и вычисляет его хэш (SHA-256)
4. **API Gateway** запускает анализ в File Analysis Service
5. **File Analysis Service** сравнивает хэш файла с хэшами всех ранее загруженных работ
6. **Система создаёт отчёт** с результатом проверки и облаком слов

## Алгоритм определения плагиата
Плагиат обнаруживается, если в системе существует более ранняя сдача того же файла (проверяется по хэшу SHA-256) другим студентом. Проверка осуществляется глобально по всем работам, независимо от задания.

**Дополнительно:** Для текстовых файлов система генерирует облако слов через QuickChart API, чтобы визуализировать содержание работы.

## Требования для запуска
- Docker
- Docker Compose
- 2-4 ГБ свободной оперативной памяти

## Запуск системы
1. Убедитесь, что установлены Docker и Docker Compose
2. Скачайте проект или скопируйте репозиторий
3. Выполните в терминале: `docker-compose up --build`
4. Откройте в браузере: `http://localhost:8000`

Система запустит 3 контейнера:
- api-gateway (порт 8000)
- file-storing (порт 8001)
- file-analysis (порт 8002)

## API Endpoints
### Через API Gateway
- `POST /upload` - загрузка работы
- `GET /works/{id}/report` - получение отчёта в формате JSON
- `GET /report/{id}` - веб-страница с отчётом
- `GET /` - веб-интерфейс для загрузки файлов
- `GET /health` - проверка статуса системы

### Прямые запросы к микросервисам
- File Storing: `GET http://localhost:8001/works` - список всех работ
- File Analysis: `POST http://localhost:8002/analyze` - запуск анализа

## Как пользоваться веб-интерфейсом
1. Откройте `http://localhost:8000`
2. Заполните форму:
   - **ФИО студента** (например, "Иванов Иван Иванович")
   - **ID задания** (например, "hw_1")
   - **Файл работы** (поддерживаются .txt, .pdf, .docx)
3. Нажмите "Загрузить"
4. Система выдаст ID работы и ссылку на отчёт
5. Перейдите по ссылке для просмотра результатов

## Примеры использования через терминал
```bash
# Загрузка файла
curl -X POST "http://localhost:8000/upload" \
  -F "file=@работа.txt" \
  -F "student_name=Иванов Иван" \
  -F "assignment_id=homework_1"

# Получение отчёта
curl "http://localhost:8000/works/1/report"

# В формате JSON
curl http://localhost:8000/works/1/report | python3 -m json.tool
